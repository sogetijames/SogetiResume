<form style="margin-bottom:50px;">
<div class="row">
  <!-- Image -->
  <div class="col-sm-2">
    <img class="img-fluid img-rounded" [ngClass]="{'red-profile': user?.status?.text == 'PTO', 'green-profile': user?.status?.text == 'ATO', 'yellow-profile': user?.status?.text == 'Project'}" src="{{user?.profileImageURL}}" />
    <a *ngIf="editable" target="_blank" href="https://en.gravatar.com/connect/">Change Gravatar</a>
  </div>

  <!-- Non Editable -->
  <div class="col-sm-10" *ngIf="!editable">
    <h2 class="red-font">{{ user?.first + " " + user?.last  }} <small class="text-muted">{{ user?.email }}</small></h2>
    <h5 class="top-buffer">
      {{ user?.title }} 
      <span class="red-font"> | </span>
      {{ user?.practice }}
      <span class="red-font"> | </span>
      {{ user?.unit }}
    </h5>
    <p class="top-buffer" [ngClass]="{'red-font': user?.status?.text == 'PTO', 'green-font': user?.status?.text == 'ATO', 'yellow-font': user?.status?.text == 'Project'}">{{ user?.status?.text}} <span *ngIf="user?.status?.description!='' ">{{": " + user?.status?.description}}</span></p>
  </div> 

  <!-- Editable -->
  <div class="col-sm-10" *ngIf="editable">
    <fieldset class="form-group row">
      <div class="col-xl-6">
        <input type="text" class="form-control" [(ngModel)]="user.first" placeholder="firstname">
      </div>
      <div class="col-xl-6">
        <input type="text" class="form-control" [(ngModel)]="user.last" placeholder="lastname">
      </div>
    </fieldset>
    <fieldset class="form-group">
      <input type="text" class="form-control" [(ngModel)]="user.unit" placeholder="unit">
    </fieldset>
    <fieldset class="form-group">
      <input type="text" class="form-control" [(ngModel)]="user.practice" placeholder="practice">
    </fieldset>
    <fieldset class="form-group">
      <input type="text" class="form-control" [(ngModel)]="user.title" placeholder="title">
    </fieldset>
    <fieldset class="form-group row">
      <div class="col-xl-6">
        <select [(ngModel)]="user.status.text" class="form-control">
          <option *ngFor="#status of statusArr" [value]="status">{{ status }}</option>
        </select>
      </div>
      <div class="col-xl-6" *ngIf="user.status.text != 'ATO'">
        <input type="text" class="form-control" [(ngModel)]="user.status.description" placeholder="description (optional)">
      </div>
    </fieldset>
  </div>   
</div>

<!-- Tab Nav -->
<ul class="nav nav-pills top-buffer bottom-buffer" role="tablist">
  <li class="nav-item">
    <a class="nav-link red-font active" role="button" data-toggle="pill" data-target="#bio" aria-controls="bio">
      <i class="fa fa-book" aria-hidden="true"></i> Bio
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link red-font" role="button" data-toggle="pill" data-target="#projects" aria-controls="projects">
      <i class="fa fa-folder-open" aria-hidden="true"></i> Projects
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link red-font" role="button" data-toggle="pill" data-target="#skills" aria-controls="skills">
      <i class="fa fa-tasks" aria-hidden="true"></i> Skills
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link red-font" role="button" data-toggle="pill" data-target="#education" aria-controls="education">
      <i class="fa fa-graduation-cap" aria-hidden="true"></i> Education
    </a>
  </li>
</ul>

<!-- Tab Content -->
<div class="tab-content">
  
  <div class="tab-pane active" id="bio" role="tabpanel">
    <!-- Not Editable -->
    <div class="card" *ngIf="!editable">
      <div class="card-block">
        <p class="card-text">{{ user?.bio }}</p>
      </div>
    </div>
    <!-- Editable -->
    <div class="card" *ngIf="editable">
      <div class="card-block">
        <fieldset class="form-group" *ngIf="user != undefined">
          <textarea class="form-control" rows="3" [(ngModel)]="user.bio" ></textarea>
        </fieldset>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="projects" role="tabpanel">
    <!-- Not Editable -->
    <div class="card" *ngIf="!editable">
      <div class="card-block">
        <p class="card-text">This is where projects go</p>
      </div>
    </div>
    <!-- Editable -->
    <div class="card" *ngIf="editable">
      <div class="card-block">
        <fieldset class="form-group">
          <textarea class="form-control" rows="3">This is where projects are edited</textarea>
        </fieldset>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="skills" role="tabpanel">
    <div class="col-md-12 bottom-buffer">
      <button type="button" class="btn btn-primary btn-sm" *ngIf="aTOz == 'down' || aTOz == 'neutral'" (click)="sortSkills('A-Z')">Skill <i class="fa fa-arrow-down" aria-hidden="true"></i></button>
      <button type="button" class="btn btn-primary btn-sm" *ngIf="aTOz == 'up' || aTOz == 'neutral'" (click)="sortSkills('Z-A')">Skill <i class="fa fa-arrow-up" aria-hidden="true"></i></button>
      <button type="button" class="btn btn-primary btn-sm" *ngIf="profUp == 'down' || profUp == 'neutral'" (click)="sortSkills('UP')">Proficiency <i class="fa fa-arrow-down" aria-hidden="true"></i></button>
      <button type="button" class="btn btn-primary btn-sm" *ngIf="profUp == 'up' || profUp == 'neutral'" (click)="sortSkills('DOWN')">Proficiency <i class="fa fa-arrow-up" aria-hidden="true"></i></button>
    </div>
    <!-- Not Editable -->
    <div *ngIf="!editable" >
      <div class="col-md-2" *ngFor="#skill of user?.skills">
        <div style="color: White;" class="card text-xl-center" [ngClass]="{'awareness-skill': skill?.value == proficiencyArr[0], 'novice-skill': skill?.value == proficiencyArr[1], 'intermediate-skill': skill?.value == proficiencyArr[2], 'advanced-skill': skill?.value == proficiencyArr[3], 'expert-skill': skill?.value == proficiencyArr[4]}">
          <div class="card-block">
            <h4 class="card-title red-font"></h4>
            <p class="card-text">{{ skill?.key }}</p>
            <p class="card-text">{{ skill?.value }}</p>
          </div>
        </div>
      </div>
    </div>
    <!-- Editable -->
    <div *ngIf="editable">
      <div class="col-md-2" *ngFor="#skill of user?.skills; #i = index">
        <div class="card text-xl-center">
          <div class="card-header text-xs-right" style="padding:3px;">
            <button type="button" class="btn btn-sm btn-secondary-outline" (click)="user.skills.splice(i, 1)">
              <i class="fa fa-times" aria-hidden="true"></i>
            </button>
          </div>
          <div class="card-block" style="padding:5px;">
            <fieldset class="form-group">
              <input type="text" class="form-control" [(ngModel)]="skill.key" placeholder="Skill">
            </fieldset>
            <fieldset class="form-group">            
                <select [(ngModel)]="skill.value" class="form-control">
                  <option *ngFor="#proficiency of proficiencyArr" [value]="proficiency">{{ proficiency }}</option>
                </select>
            </fieldset>
          </div>
        </div>
      </div>
      <div class="col-md-2">
        <div class="card text-xl-center">
          <div class="card-header" style="padding:6px;">
            Add Skill
          </div>
          <div class="card-block" style="height:118px;">
          <button style="width:100%;" type="button" class="btn btn-danger-outline btn-lg" (click)="user.skills.push( { key: '', value: '' } )">
              <i class="fa fa-plus" aria-hidden="true"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="education" role="tabpanel">
    <!-- Not Editable -->
    <div class="card" *ngIf="!editable">
      <ul class="list-group list-group-flush">
        <li class="list-group-item">
          <h4 class="list-group-item-heading">B.S. Computer Science</h4>
          <p class="list-group-item-text">University Of Houston</p>
        </li>
        <li class="list-group-item">
          <h4 class="list-group-item-heading">Sitecore C# Developer Certification</h4>
          <p class="list-group-item-text">Sitecore</p>
        </li>
        <li class="list-group-item">
          <h4 class="list-group-item-heading">Angular Certification</h4>
          <p class="list-group-item-text">Angular School</p>
        </li>
      </ul>
    </div>
    <!-- Editable -->
    <div class="card" *ngIf="editable">
      <ul class="list-group list-group-flush">
        <li class="list-group-item">
          <h4 class="list-group-item-heading">B.S. Computer Science</h4>
          <p class="list-group-item-text">University Of Houston</p>
        </li>
        <li class="list-group-item">
          <h4 class="list-group-item-heading">Sitecore C# Developer Certification</h4>
          <p class="list-group-item-text">Sitecore</p>
        </li>
        <li class="list-group-item">
          <h4 class="list-group-item-heading">Angular Certification</h4>
          <p class="list-group-item-text">Angular School</p>
        </li>
      </ul>
    </div>
  </div>
</div>

<!-- Footer -->
<div class="row" *ngIf="_currentUser.auth.uid == uid">
  <nav class="navbar navbar-fixed-bottom navbar-default">
    <ul class="nav navbar-nav">
      <li class="pull-xs-right" *ngIf="!editable">
        <button type="button" class="btn btn-secondary" (click)="clickEdit()">
          <i class="fa fa-pencil-square-o" aria-hidden="true"> Edit</i>
        </button>
      </li>
      <li class="pull-xs-right" *ngIf="editable">
        <div class="btn-toolbar" role="toolbar">
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-secondary red-font" (click)="clickCancel()">
              <i class="fa fa-times" aria-hidden="true"> Cancel</i>
            </button> 
          </div>
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-secondary green-font" (click)="clickSave()">
              <i class="fa fa-floppy-o" aria-hidden="true"> Save</i>
            </button>
          </div>
        </div>        
      </li>
    </ul>
  </nav>
</div>
</form>