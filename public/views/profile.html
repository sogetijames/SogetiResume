<form>
<div class="row" >
  <div class="col-sm-2">
    <img class="img-fluid img-rounded" [ngClass]="{'red-profile': user?.status?.text == 'PTO', 'green-profile': user?.status?.text == 'ATO', 'yellow-profile': user?.status?.text == 'Project'}" src="{{user?.profileImageURL}}" />
    <a *ngIf="editable" target="_blank" href="https://en.gravatar.com/connect/">Change Gravatar</a>
  </div>
  <!-- Non Editable -->
  <div class="col-sm-8" *ngIf="!editable">
    <p>{{ user?.first + " " + user?.last  }}</p>
    <p>{{ user?.unit }}</p>
    <p>{{ user?.practice }}</p>
    <p>{{ user?.title }}</p>
    <p>{{ user?.email }}</p>
    <p [ngClass]="{'red-font': user?.status?.text == 'PTO', 'green-font': user?.status?.text == 'ATO', 'yellow-font': user?.status?.text == 'Project'}">{{ user?.status?.text}} <span *ngIf="user?.status?.description!='' ">{{": " + user?.status?.description}}</span></p>
  </div> 
  <!-- Editable -->
  <div class="col-sm-8" *ngIf="editable">

    <fieldset class="form-group row">
      <div class="col-xl-6">
        <input type="text" class="form-control" [(ngModel)]="user.first" placeholder="firstname">
      </div>
      <div class="col-xl-6">
        <input type="text" class="form-control" [(ngModel)]="user.last" placeholder="lastname">
      </div>
    </fieldset>
    <fieldset class="form-group">
      <input type="text" class="form-control" [(ngModel)]="user.unit" placeholder="unit">
    </fieldset>
    <fieldset class="form-group">
      <input type="text" class="form-control" [(ngModel)]="user.practice" placeholder="practice">
    </fieldset>
    <fieldset class="form-group">
      <input type="text" class="form-control" [(ngModel)]="user.title" placeholder="title">
    </fieldset>
    <fieldset class="form-group row">
      <div class="col-xl-6">
        <select [(ngModel)]="user.status.text" class="form-control">
          <option *ngFor="#status of statusArr" [value]="status">{{ status }}</option>
        </select>
      </div>
      <div class="col-xl-6" *ngIf="user.status.text != 'ATO'">
        <input type="text" class="form-control" [(ngModel)]="user.status.description" placeholder="description (optional)">
      </div>
    </fieldset>
  </div> 
  <div class="col-sm-1">
    <button type="button" class="btn btn-link" (click)="clickEdit()" *ngIf="!editable && _currentUser.auth.uid == uid"><i class="fa fa-pencil-square-o black-font" aria-hidden="true"> Edit</i></button>
    <button type="button" class="btn btn-link" (click)="clickSave()" *ngIf="editable"><i class="fa fa-floppy-o green-font" aria-hidden="true"> Save</i></button>
    <button type="button" class="btn btn-link" (click)="clickCancel()" *ngIf="editable"><i class="fa fa-times red-font" aria-hidden="true"> Cancel</i></button>
  </div>
</div>

<!-- Tab Content -->
<ul class="nav nav-pills top-buffer bottom-buffer" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" role="button" data-toggle="pill" data-target="#bio" aria-controls="bio">
      <i class="fa fa-book" aria-hidden="true"></i> Bio
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link" role="button" data-toggle="pill" data-target="#projects" aria-controls="projects">
      <i class="fa fa-folder-open" aria-hidden="true"></i> Projects
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link" role="button" data-toggle="pill" data-target="#skills" aria-controls="skills">
      <i class="fa fa-tasks" aria-hidden="true"></i> Skills
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link" role="button" data-toggle="pill" data-target="#education" aria-controls="education">
      <i class="fa fa-graduation-cap" aria-hidden="true"></i> Education
    </a>
  </li>
</ul>

<!-- Tab Content -->
<div class="tab-content">
  <div class="tab-pane active" id="bio" role="tabpanel">
    <div class="card" *ngIf="!editable">
      <div class="card-block">
        <p class="card-text">{{ user?.bio }}</p>
      </div>
    </div>

    <div class="card" *ngIf="editable">
      <div class="card-block">
        <fieldset class="form-group" *ngIf="user != undefined">
          <textarea class="form-control" rows="3" [(ngModel)]="user.bio" ></textarea>
        </fieldset>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="projects" role="tabpanel">
    <div class="card" *ngIf="!editable">
      <div class="card-block">
        <p class="card-text">This is where projects go</p>
      </div>
    </div>

    <div class="card" *ngIf="editable">
      <div class="card-block">
        <fieldset class="form-group">
          <textarea class="form-control" rows="3">This is where projects are edited</textarea>
        </fieldset>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="skills" role="tabpanel">
    <div class="col-md-2" *ngIf="!editable" *ngFor="#skill of user?.skills">
      <div class="card card-hover text-xl-center">
        <div class="card-block">
          <h4 class="card-title red-font"></h4>
          <p class="card-text">{{ skill?.key }}</p>
          <p class="card-text">{{ skill?.value }}</p>
        </div>
      </div>
    </div>

    <div class="card" *ngIf="editable">
      <ul class="list-group list-group-flush  text-xs-right">
        <li class="list-group-item" *ngFor="#skill of user?.skills; #i = index">
          <fieldset class="form-group row">
            <div class="col-xl-5" style="padding: 2px;">
              <input type="text" class="form-control" [(ngModel)]="skill.key" placeholder="Skill">
            </div>
            <div class="col-xl-5" style="padding: 2px;">
              <select [(ngModel)]="skill.value" class="form-control">
                <option *ngFor="#proficiency of proficiencyArr" [value]="proficiency">{{ proficiency }}</option>
              </select>
            </div>
            <div class="col-xl-1" style="padding: 2px;">
              <button type="button" class="btn btn-secondary-outline" (click)="user.skills.splice(i, 1)">
                <i class="fa fa-times" aria-hidden="true"></i>
              </button>
            </div>
          </fieldset>
        </li>
      </ul>
      <div class="card-block text-xs-right">
        <button type="button" class="btn btn-danger-outline" (click)="user.skills.push( { key: '', value: '' } )">
          <i class="fa fa-plus" aria-hidden="true"></i>
        </button>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="education" role="tabpanel">
    <div class="card" *ngIf="!editable">
      <ul class="list-group list-group-flush">
        <li class="list-group-item">
          <h4 class="list-group-item-heading">B.S. Computer Science</h4>
          <p class="list-group-item-text">University Of Houston</p>
        </li>
        <li class="list-group-item">
          <h4 class="list-group-item-heading">Sitecore C# Developer Certification</h4>
          <p class="list-group-item-text">Sitecore</p>
        </li>
        <li class="list-group-item">
          <h4 class="list-group-item-heading">Angular Certification</h4>
          <p class="list-group-item-text">Angular School</p>
        </li>
      </ul>
    </div>

    <div class="card" *ngIf="editable">
      <ul class="list-group list-group-flush">
        <li class="list-group-item">
          <h4 class="list-group-item-heading">B.S. Computer Science</h4>
          <p class="list-group-item-text">University Of Houston</p>
        </li>
        <li class="list-group-item">
          <h4 class="list-group-item-heading">Sitecore C# Developer Certification</h4>
          <p class="list-group-item-text">Sitecore</p>
        </li>
        <li class="list-group-item">
          <h4 class="list-group-item-heading">Angular Certification</h4>
          <p class="list-group-item-text">Angular School</p>
        </li>
      </ul>
    </div>
  </div>
</div>
</form>