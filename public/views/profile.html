<form>
<div class="row" >
  <div class="col-xl-2">
    <img class="img-fluid img-rounded" [ngClass]="{'red-profile': user?.status?.text == 'PTO', 'green-profile': user?.status?.text == 'ATO', 'yellow-profile': user?.status?.text == 'Project'}" src="{{user?.profileImageURL}}" />
    <a *ngIf="editable" target="_blank" href="https://en.gravatar.com/connect/">Change Gravatar</a>
  </div>
  <!-- Non Editable -->
  <div class="col-xl-8" *ngIf="!editable">
    <p>{{ user?.first + " " + user?.last  }}</p>
    <p>{{ user?.unit }}</p>
    <p>{{ user?.practice }}</p>
    <p>{{ user?.title }}</p>
    <p>{{ user?.email }}</p>
    <p [ngClass]="{'red-font': user?.status?.text == 'PTO', 'green-font': user?.status?.text == 'ATO', 'yellow-font': user?.status?.text == 'Project'}">{{ user?.status?.text}} <span *ngIf="user?.status?.description!='' ">{{": " + user?.status?.description}}</span></p>
  </div> 
  <!-- Editable -->
  <div class="col-xl-8" *ngIf="editable">

    <fieldset class="form-group row">
      <div class="col-xl-6">
        <input type="text" class="form-control" [(ngModel)]="user.first" placeholder="firstname">
      </div>
      <div class="col-xl-6">
        <input type="text" class="form-control" [(ngModel)]="user.last" placeholder="lastname">
      </div>
    </fieldset>
    <fieldset class="form-group">
      <input type="text" class="form-control" [(ngModel)]="user.unit" placeholder="unit">
    </fieldset>
    <fieldset class="form-group">
      <input type="text" class="form-control" [(ngModel)]="user.practice" placeholder="practice">
    </fieldset>
    <fieldset class="form-group">
      <input type="text" class="form-control" [(ngModel)]="user.title" placeholder="title">
    </fieldset>
    <fieldset class="form-group row">
      <div class="col-xl-6">
        <input type="text" class="form-control" [(ngModel)]="user.status.text" placeholder="status">
      </div>
      <div class="col-xl-6">
        <input type="text" class="form-control" [(ngModel)]="user.status.description" placeholder="description (optional)">
      </div>
    </fieldset>
  </div> 
  <div class="col-xl-1">
    <button type="button" class="btn btn-link" (click)="clickEdit()" *ngIf="!editable && _currentUser.auth.uid == uid"><i class="fa fa-pencil-square-o black-font" aria-hidden="true"> Edit</i></button>
    <button type="button" class="btn btn-link" (click)="clickSave()" *ngIf="editable"><i class="fa fa-floppy-o green-font" aria-hidden="true"> Save</i></button>
    <button type="button" class="btn btn-link" (click)="clickCancel()" *ngIf="editable"><i class="fa fa-times red-font" aria-hidden="true"> Cancel</i></button>
  </div>
</div>

<!-- Non editable -->
<div class="card-deck-wrapper top-buffer" *ngIf="!editable">
  <div class="card-deck">

    <div class="card">
      <div class="card-header">
        <i class="fa fa-book" aria-hidden="true"></i> Bio
      </div>
      <div class="card-block">
        <p class="card-text">{{ user?.bio }}</p>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <i class="fa fa-tasks" aria-hidden="true"></i> Skills
      </div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item" *ngFor="#skill of user?.skills">
          <h4 class="list-group-item-heading">{{ skill.key }}</h4>
          <p class="list-group-item-text">{{ skill.value }}</p>
        </li>
      </ul>
    </div>

    <div class="card">
      <div class="card-header">
        <i class="fa fa-graduation-cap" aria-hidden="true"></i> Education
      </div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">
          <h4 class="list-group-item-heading">B.S. Computer Science</h4>
          <p class="list-group-item-text">University Of Houston</p>
        </li>
        <li class="list-group-item">
          <h4 class="list-group-item-heading">Sitecore C# Developer Certification</h4>
          <p class="list-group-item-text">Sitecore</p>
        </li>
        <li class="list-group-item">
          <h4 class="list-group-item-heading">Angular Certification</h4>
          <p class="list-group-item-text">Angular School</p>
        </li>
      </ul>
    </div>

  </div>  
</div>

<!-- Editable -->
<div class="card-deck-wrapper top-buffer" *ngIf="editable">
  <div class="card-deck">

    <div class="card">
      <div class="card-header">
        <i class="fa fa-book" aria-hidden="true"></i> Bio
      </div>
      <div class="card-block">
        <fieldset class="form-group">
          <textarea class="form-control" rows="3" [(ngModel)]="user.bio" ></textarea>
        </fieldset>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <i class="fa fa-tasks" aria-hidden="true"></i> Skills
      </div>
      <ul class="list-group list-group-flush  text-xs-right">
        <li class="list-group-item" *ngFor="#skill of user?.skills">
          <form class="form-inline">
            <div class="form-group">
              <input type="text" class="form-control" [(ngModel)]="skill.key" placeholder="Skill">
              <input type="text" class="form-control" [(ngModel)]="skill.value" placeholder="Proficiency">
              <button type="button" class="btn btn-secondary-outline" (click)="user.skills.splice($index, 1)">
                <i class="fa fa-times" aria-hidden="true"></i>
              </button>  
            </div> 
          </form>
        </li>
      </ul>
      <div class="card-block text-xs-right">
        <button type="button" class="btn btn-danger-outline" (click)="user.skills.push({})">
          <i class="fa fa-plus" aria-hidden="true"></i>
        </button>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <i class="fa fa-graduation-cap" aria-hidden="true"></i> Education
      </div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">
          <h4 class="list-group-item-heading">B.S. Computer Science</h4>
          <p class="list-group-item-text">University Of Houston</p>
        </li>
        <li class="list-group-item">
          <h4 class="list-group-item-heading">Sitecore C# Developer Certification</h4>
          <p class="list-group-item-text">Sitecore</p>
        </li>
        <li class="list-group-item">
          <h4 class="list-group-item-heading">Angular Certification</h4>
          <p class="list-group-item-text">Angular School</p>
        </li>
      </ul>
    </div>

  </div>  
</div>
</form>